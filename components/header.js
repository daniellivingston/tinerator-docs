import { useState, useEffect } from 'react';
import Link from 'next/link';
import Head from 'next/head';

const logo = inverted => {
  const color = inverted ? '#fff' : '#000';

  return `
  <svg width="99px" height="22px" viewBox="0 0 99 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g id="Scaled---All-Outlines" fill="${color}" fill-rule="nonzero">
              <g id="Mark" transform="translate(-0.000000, 0.000000)">
                  <g id="Group">
                      <polygon id="Line" transform="translate(7.646341, 6.841463) rotate(-40.000000) translate(-7.646341, -6.841463) " points="-0.536585366 8.58536585 15.8292683 8.58536585 15.8292683 5.09756098 -0.536585366 5.09756098"></polygon>
                      <polygon id="Line-Copy" transform="translate(7.646341, 15.158537) rotate(-40.000000) translate(-7.646341, -15.158537) " points="-0.536585366 16.902439 15.8292683 16.902439 15.8292683 13.4146341 -0.536585366 13.4146341"></polygon>
                  </g>
              </g>
              <path d="M29.3449756,7.30770732 C29.0616571,6.94712015 28.6914169,6.66058643 28.2342439,6.44809756 C27.7770709,6.23560869 27.3360021,6.12936585 26.9110244,6.12936585 C26.6920965,6.12936585 26.4699523,6.14868273 26.2445854,6.18731707 C26.0192184,6.22595141 25.8163911,6.29999945 25.6360976,6.40946341 C25.455804,6.51892738 25.3044884,6.6605845 25.1821463,6.83443902 C25.0598043,7.00829355 24.9986341,7.23043767 24.9986341,7.50087805 C24.9986341,7.73268409 25.0469263,7.92585289 25.1435122,8.08039024 C25.240098,8.23492683 25.3817552,8.37014576 25.5684878,8.48604878 C25.7552204,8.6019518 25.9773646,8.70819464 26.2349268,8.80478049 C26.4924891,8.90136634 26.7822423,9.00117022 27.1041951,9.10419512 C27.5678072,9.25873248 28.0507292,9.42936492 28.5529756,9.61609756 C29.055222,9.8028302 29.5123882,10.0507302 29.9244878,10.3598049 C30.3365874,10.6688796 30.6778523,11.0519977 30.9482927,11.5091707 C31.2187331,11.9663437 31.3539512,12.5361917 31.3539512,13.2187317 C31.3539512,14.0042966 31.2090746,14.6836069 30.9193171,15.2566829 C30.6295595,15.829759 30.2400024,16.3030225 29.7506341,16.6764878 C29.2612658,17.0499531 28.7010763,17.3268284 28.0700488,17.507122 C27.4390244,17.6874155 26.7886863,17.777561 26.1190244,17.777561 C25.1402878,17.777561 24.1937607,17.6069285 23.2794146,17.2656585 C22.3650686,16.9243885 21.6052713,16.4382471 21,15.8072195 L23.1635122,13.6050732 C23.4983431,14.0171728 23.9394119,14.3616572 24.4867317,14.6385366 C25.0340515,14.915416 25.5781436,15.0538537 26.1190244,15.0538537 C26.3637085,15.0538537 26.6019501,15.0280978 26.8337561,14.9765854 C27.0655621,14.9250729 27.2683894,14.8413664 27.4422439,14.7254634 C27.6160984,14.6095604 27.7545361,14.4550254 27.857561,14.2618537 C27.9605859,14.068682 28.0120976,13.8368794 28.0120976,13.566439 C28.0120976,13.3088768 27.947708,13.0899521 27.8189268,12.9096585 C27.6901457,12.729365 27.5066353,12.5651715 27.2683902,12.4170732 C27.0301452,12.2689749 26.733953,12.1337567 26.3798049,12.0114146 C26.0256568,11.8890726 25.6232218,11.7570739 25.1724878,11.6154146 C24.734632,11.4737554 24.3064411,11.3063424 23.8879024,11.1131707 C23.4693638,10.919999 23.0959041,10.6720991 22.7675122,10.3694634 C22.4391203,10.0668278 22.1751229,9.69980704 21.9755122,9.26839024 C21.7759014,8.83697345 21.6760976,8.31219821 21.6760976,7.69404878 C21.6760976,6.9342401 21.8306326,6.28390514 22.1397073,5.74302439 C22.448782,5.20214364 22.8544365,4.7578554 23.3566829,4.41014634 C23.8589293,4.06243729 24.4255578,3.80809837 25.0565854,3.64712195 C25.6876129,3.48614554 26.32507,3.40565854 26.9689756,3.40565854 C27.7416624,3.40565854 28.530435,3.54731566 29.3353171,3.83063415 C30.1401991,4.11395264 30.8452653,4.53248504 31.4505366,5.0862439 L29.3449756,7.30770732 Z M36.8013659,10.1859512 L36.8013659,13.8561951 C36.8013659,14.3069291 36.8882918,14.6449745 37.0621463,14.8703415 C37.2360009,15.0957084 37.5482904,15.2083902 37.9990244,15.2083902 C38.1535617,15.2083902 38.3177552,15.1955123 38.4916098,15.1697561 C38.6654643,15.1439999 38.8103409,15.1053661 38.9262439,15.0538537 L38.964878,17.3719024 C38.7459501,17.4491711 38.4690748,17.5167802 38.1342439,17.5747317 C37.799413,17.6326832 37.464587,17.6616585 37.1297561,17.6616585 C36.4858504,17.6616585 35.9449778,17.5811715 35.507122,17.4201951 C35.0692661,17.2592187 34.7183428,17.0274161 34.4543415,16.7247805 C34.1903401,16.4221448 34.0003908,16.0615631 33.8844878,15.6430244 C33.7685848,15.2244857 33.7106341,14.7576611 33.7106341,14.2425366 L33.7106341,10.1859512 L32.1652683,10.1859512 L32.1652683,7.80995122 L33.6913171,7.80995122 L33.6913171,5.27941463 L36.8013659,5.27941463 L36.8013659,7.80995122 L39.0614634,7.80995122 L39.0614634,10.1859512 L36.8013659,10.1859512 Z M46.2280976,13.2380488 L45.822439,13.2380488 C45.47473,13.2380488 45.1238066,13.2541462 44.7696585,13.2863415 C44.4155104,13.3185367 44.1000014,13.3797069 43.823122,13.4698537 C43.5462425,13.5600005 43.3176594,13.6919991 43.1373659,13.8658537 C42.9570723,14.0397082 42.8669268,14.2682913 42.8669268,14.5516098 C42.8669268,14.7319033 42.9087801,14.8864384 42.9924878,15.0152195 C43.0761955,15.1440006 43.1824384,15.247024 43.3112195,15.3242927 C43.4400006,15.4015614 43.5880967,15.4562925 43.7555122,15.4884878 C43.9229277,15.5206831 44.0839017,15.5367805 44.238439,15.5367805 C44.8823447,15.5367805 45.3749251,15.3597091 45.7161951,15.005561 C46.0574651,14.6514129 46.2280976,14.1717103 46.2280976,13.566439 L46.2280976,13.2380488 Z M40.4136585,9.1235122 C40.9802955,8.58263144 41.6402889,8.17697696 42.3936585,7.90653659 C43.1470282,7.63609621 43.9164839,7.50087805 44.7020488,7.50087805 C45.5133699,7.50087805 46.1991192,7.60068193 46.7593171,7.80029268 C47.319515,7.99990344 47.7734617,8.30897352 48.1211707,8.7275122 C48.4688798,9.14605087 48.7232187,9.67404559 48.8841951,10.3115122 C49.0451715,10.9489788 49.1256585,11.7055566 49.1256585,12.5812683 L49.1256585,17.4298537 L46.2280976,17.4298537 L46.2280976,16.4060488 L46.1701463,16.4060488 C45.9254622,16.8052703 45.555222,17.1143404 45.0594146,17.3332683 C44.5636073,17.5521962 44.0259541,17.6616585 43.446439,17.6616585 C43.0600956,17.6616585 42.6608801,17.6101469 42.2487805,17.507122 C41.8366809,17.404097 41.4600017,17.2366841 41.1187317,17.004878 C40.7774617,16.773072 40.4973669,16.4640019 40.278439,16.0776585 C40.0595111,15.6913151 39.9500488,15.2148321 39.9500488,14.6481951 C39.9500488,13.952777 40.1399981,13.3925875 40.5199024,12.9676098 C40.8998068,12.542632 41.3891677,12.2142451 41.988,11.982439 C42.5868323,11.750633 43.2532646,11.5960979 43.9873171,11.5188293 C44.7213695,11.4415606 45.4360941,11.4029268 46.1315122,11.4029268 L46.1315122,11.2483902 C46.1315122,10.7719001 45.9640992,10.4209767 45.6292683,10.1956098 C45.2944374,9.97024278 44.8823439,9.85756098 44.3929756,9.85756098 C43.9422416,9.85756098 43.5076118,9.95414538 43.0890732,10.1473171 C42.6705345,10.3404888 42.3131722,10.5722913 42.0169756,10.8427317 L40.4136585,9.1235122 Z M54.8134634,10.1859512 L54.8134634,13.8561951 C54.8134634,14.3069291 54.9003894,14.6449745 55.0742439,14.8703415 C55.2480984,15.0957084 55.560388,15.2083902 56.011122,15.2083902 C56.1656593,15.2083902 56.3298528,15.1955123 56.5037073,15.1697561 C56.6775618,15.1439999 56.8224384,15.1053661 56.9383415,15.0538537 L56.9769756,17.3719024 C56.7580477,17.4491711 56.4811724,17.5167802 56.1463415,17.5747317 C55.8115105,17.6326832 55.4766846,17.6616585 55.1418537,17.6616585 C54.497948,17.6616585 53.9570754,17.5811715 53.5192195,17.4201951 C53.0813637,17.2592187 52.7304403,17.0274161 52.466439,16.7247805 C52.2024377,16.4221448 52.0124884,16.0615631 51.8965854,15.6430244 C51.7806823,15.2244857 51.7227317,14.7576611 51.7227317,14.2425366 L51.7227317,10.1859512 L50.1773659,10.1859512 L50.1773659,7.80995122 L51.7034146,7.80995122 L51.7034146,5.27941463 L54.8134634,5.27941463 L54.8134634,7.80995122 L57.073561,7.80995122 L57.073561,10.1859512 L54.8134634,10.1859512 Z M61.9994146,4.73853659 C61.9994146,4.98322074 61.9511224,5.21180382 61.8545366,5.42429268 C61.7579507,5.63678155 61.6291715,5.82029191 61.4681951,5.97482927 C61.3072187,6.12936663 61.1140499,6.25170687 60.8886829,6.34185366 C60.6633159,6.43200045 60.4282939,6.47707317 60.1836098,6.47707317 C59.6684852,6.47707317 59.2370749,6.30644073 58.8893659,5.96517073 C58.5416568,5.62390073 58.3678049,5.21502677 58.3678049,4.73853659 C58.3678049,4.50673055 58.4128776,4.28458643 58.5030244,4.07209756 C58.5931712,3.85960869 58.7219504,3.67609833 58.8893659,3.52156098 C59.0567813,3.36702362 59.2499501,3.2414639 59.468878,3.14487805 C59.687806,3.0482922 59.9260475,3 60.1836098,3 C60.4282939,3 60.6633159,3.04507272 60.8886829,3.13521951 C61.1140499,3.2253663 61.3072187,3.34770654 61.4681951,3.5022439 C61.6291715,3.65678126 61.7579507,3.84029162 61.8545366,4.05278049 C61.9511224,4.26526936 61.9994146,4.49385244 61.9994146,4.73853659 Z M58.5996098,17.4298537 L58.5996098,7.80995122 L61.7676098,7.80995122 L61.7676098,17.4298537 L58.5996098,17.4298537 Z M70.368,10.92 C70.1877064,10.688194 69.9430259,10.5014641 69.6339512,10.3598049 C69.3248765,10.2181456 69.0093675,10.1473171 68.6874146,10.1473171 C68.3525837,10.1473171 68.0499526,10.2149262 67.7795122,10.3501463 C67.5090718,10.4853665 67.2772693,10.6656574 67.0840976,10.8910244 C66.8909259,11.1163914 66.7396103,11.3771693 66.6301463,11.6733659 C66.5206824,11.9695625 66.4659512,12.2850715 66.4659512,12.6199024 C66.4659512,12.9547334 66.5174629,13.2702424 66.6204878,13.566439 C66.7235127,13.8626356 66.8748283,14.1234135 67.074439,14.3487805 C67.2740498,14.5741475 67.5122913,14.7512189 67.7891707,14.88 C68.0660502,15.0087811 68.3783397,15.0731707 68.7260488,15.0731707 C69.0480016,15.0731707 69.3667301,15.0120006 69.6822439,14.8896585 C69.9977577,14.7673165 70.2520966,14.5902451 70.4452683,14.358439 L72.203122,16.5026341 C71.8039004,16.8889775 71.2887836,17.1916087 70.6577561,17.4105366 C70.0267286,17.6294645 69.3570767,17.7389268 68.6487805,17.7389268 C67.8889718,17.7389268 67.1806862,17.6230255 66.5239024,17.3912195 C65.8671187,17.1594146 65.2972707,16.8213681 64.8143415,16.3770732 C64.3314122,15.9327783 63.9515136,15.3951251 63.6746341,14.7640976 C63.3977547,14.13307 63.2593171,13.4183455 63.2593171,12.6199024 C63.2593171,11.8343375 63.3977547,11.1260519 63.6746341,10.4950244 C63.9515136,9.86399684 64.3314122,9.32634368 64.8143415,8.88204878 C65.2972707,8.43775388 65.8671187,8.096489 66.5239024,7.8582439 C67.1806862,7.61999881 67.8825329,7.50087805 68.6294634,7.50087805 C68.9771725,7.50087805 69.3216568,7.53307285 69.6629268,7.59746341 C70.0041968,7.66185398 70.3325838,7.74877994 70.6480976,7.8582439 C70.9636113,7.96770786 71.2533645,8.10292602 71.5173659,8.26390244 C71.7813672,8.42487885 72.0099503,8.60195025 72.203122,8.79512195 L70.368,10.92 Z M81.996878,17.4298537 L76.9164878,11.1324878 L76.8778537,11.1324878 L76.8778537,17.4298537 L73.6325854,17.4298537 L73.6325854,3.75336585 L76.8778537,3.75336585 L76.8778537,9.31668293 L76.9358049,9.31668293 L81.8230244,3.75336585 L85.956878,3.75336585 L80.0651707,10.0507317 L86.3045854,17.4298537 L81.996878,17.4298537 Z M90.6316098,4.73853659 C90.6316098,4.98322074 90.5833176,5.21180382 90.4867317,5.42429268 C90.3901459,5.63678155 90.2613667,5.82029191 90.1003902,5.97482927 C89.9394138,6.12936663 89.746245,6.25170687 89.520878,6.34185366 C89.2955111,6.43200045 89.060489,6.47707317 88.8158049,6.47707317 C88.3006804,6.47707317 87.86927,6.30644073 87.521561,5.96517073 C87.1738519,5.62390073 87,5.21502677 87,4.73853659 C87,4.50673055 87.0450727,4.28458643 87.1352195,4.07209756 C87.2253663,3.85960869 87.3541455,3.67609833 87.521561,3.52156098 C87.6889764,3.36702362 87.8821452,3.2414639 88.1010732,3.14487805 C88.3200011,3.0482922 88.5582426,3 88.8158049,3 C89.060489,3 89.2955111,3.04507272 89.520878,3.13521951 C89.746245,3.2253663 89.9394138,3.34770654 90.1003902,3.5022439 C90.2613667,3.65678126 90.3901459,3.84029162 90.4867317,4.05278049 C90.5833176,4.26526936 90.6316098,4.49385244 90.6316098,4.73853659 Z M87.2318049,17.4298537 L87.2318049,7.80995122 L90.3998049,7.80995122 L90.3998049,17.4298537 L87.2318049,17.4298537 Z M96.3494634,10.1859512 L96.3494634,13.8561951 C96.3494634,14.3069291 96.4363894,14.6449745 96.6102439,14.8703415 C96.7840984,15.0957084 97.096388,15.2083902 97.547122,15.2083902 C97.7016593,15.2083902 97.8658528,15.1955123 98.0397073,15.1697561 C98.2135618,15.1439999 98.3584384,15.1053661 98.4743415,15.0538537 L98.5129756,17.3719024 C98.2940477,17.4491711 98.0171724,17.5167802 97.6823415,17.5747317 C97.3475105,17.6326832 97.0126846,17.6616585 96.6778537,17.6616585 C96.033948,17.6616585 95.4930754,17.5811715 95.0552195,17.4201951 C94.6173637,17.2592187 94.2664403,17.0274161 94.002439,16.7247805 C93.7384377,16.4221448 93.5484884,16.0615631 93.4325854,15.6430244 C93.3166823,15.2244857 93.2587317,14.7576611 93.2587317,14.2425366 L93.2587317,10.1859512 L91.7133659,10.1859512 L91.7133659,7.80995122 L93.2394146,7.80995122 L93.2394146,5.27941463 L96.3494634,5.27941463 L96.3494634,7.80995122 L98.609561,7.80995122 L98.609561,10.1859512 L96.3494634,10.1859512 Z" id="StaticKit"></path>
          </g>
      </g>
  </svg>
  `;
};

const AuthControls = ({ signedIn }) => {
  if (signedIn) {
    return (
      <a href="https://app.statickit.com/" className="ml-4 btn btn-sm">
        Dashboard
      </a>
    );
  }

  return (
    <>
      <a href="https://app.statickit.com/signin" className="px-2">
        Sign In
      </a>
      <a href="https://app.statickit.com/signup" className="ml-4 btn btn-sm">
        Sign Up
      </a>
    </>
  );
};

const Nav = () => {
  const [signedIn, setSignedIn] = useState(null);

  useEffect(() => {
    setSignedIn(
      document.cookie.split(';').filter(item => item.includes('signed_in=true'))
        .length > 0
    );
  });

  if (signedIn == null) {
    return <></>;
  }

  return (
    <>
      <Link href="/docs">
        <a className="px-2">Docs</a>
      </Link>

      <Link href="/pricing">
        <a className="px-2">Pricing</a>
      </Link>

      <AuthControls signedIn={signedIn} />
    </>
  );
};

export default props => (
  <header className="mx-auto container px-6 py-4">
    <Head>
      <title>{props.pageTitle} Â· StaticKit</title>
      <link rel="shortcut icon" href="/static/favicon.ico"></link>
    </Head>
    <div className="flex items-center h-10">
      <div className="flex-grow">
        <Link href="/">
          <a className="flex items-center">
            <span dangerouslySetInnerHTML={{ __html: logo(props.inverted) }} />
          </a>
        </Link>
      </div>
      <div className="hidden sm:block font-semibold text-gray-600 text-sm">
        <Nav />
      </div>
    </div>
  </header>
);
